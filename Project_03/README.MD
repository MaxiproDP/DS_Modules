# PROJECT-3. Прогнозирование рейтинга отелей на Booking. Соревнование на Kaggle [[SF-DST] Booking reviews](https://www.kaggle.com/competitions/sf-booking)

## Оглавление

[1. Цель проекта](#цель-проекта)\
[2. Метрика качества](#метрика-качества)\
[3. Этапы работы над проектом](#этапы-работы-над-проектом)\
[4. Результат](#результаты)\
[5. Выводы](#выводы)

## Цель проекта

Создание модели прогнозирования рейтинга отелей для компании Booking.

[к оглавлению](#оглавление)

## Метрика качества

1. Результаты оцениваются по метрике **MAPE**
2. Файл представления Для каждого **id** отеля в наборе тестовых данных вы должны предсказать рейтинг отеля для **reviewer_score** переменной. 
3. Файл должен содержать заголовок и иметь следующий формат: ``` reviewer_score,id 1,1 ```

[к оглавлению](#оглавление)

## Информация о датасете

- `hotel_address` — адрес отеля;
- `review_date` — дата, когда рецензент разместил соответствующий отзыв;
- `average_score` — средний балл отеля, рассчитанный на основе последнего комментария за последний год;
- `hotel_name` — название отеля;
- `reviewer_nationality` — страна рецензента;
- `negative_review` — отрицательный отзыв, который рецензент дал отелю;
- `review_total_negative_word_counts` — общее количество слов в отрицательном отзыв;
- `positive_review` — положительный отзыв, который рецензент дал отелю;
- `review_total_positive_word_counts` — общее количество слов в положительном отзыве.
- `reviewer_score` — оценка, которую рецензент поставил отелю на основе своего опыта;
- `total_number_of_reviews_reviewer_has_given` — количество отзывов, которые рецензенты дали в прошлом;
- `total_number_of_reviews` — общее количество действительных отзывов об отеле;
- `tags` — теги, которые рецензент дал отелю;
- `days_since_review` — количество дней между датой проверки и датой очистки;
- `additional_number_of_scoring` — есть также некоторые гости, которые просто поставили оценку сервису, но не оставили отзыв. Это число указывает, сколько там действительных оценок без проверки.
- `lat` — географическая широта отеля;
- `lng` — географическая долгота отеля.

## Этапы работы над проектом

1. **Подготовка данных**
   - **Удаление строковых значений.** Вам необходимо удалить из набора данных столбцы, данные в которых представлены не числами.
   - **Очистка от пропущенных значений**. На предыдущем шаге мы делали это самым грубым из всех возможных способов, сейчас попробуйте подойти к процессу более гибко.
   - **Создание новых признаков**. Мы попробуем создать новые столбцы с данными из существующих данных или с использованием внешних источников.
   - **Преобразование признаков**. Применим различные преобразования над признаками вроде нормализации, стандартизации.
   - **Отбор признаков**. Используем анализ мультиколлинеарности как шаг отбора признаков для модели.

2. **Моделирование**
    - **Разделение набора данных**\
Прежде всего, для создания модели необходимо разделить датафрейм на набор данных, которые мы будем использовать для обучения модели, именуемый $X$, и на целевую переменную — величину, значение которой мы будем предсказывать, $y$ (в нашем случае это рейтинг отелей).
![01](img/01.png)
Далее каждый из полученных наборов мы делим на **тренировочный** (_train_, используется для обучения модели) и **тестовый** (_test_, используется для оценки точности модели). Такое деление осуществляется с помощью специального метода [train_test_split()](https://scikit-learn.org/stable/modules/generated/sklearn.model_selection.train_test_split.html) библиотеки sklearn. В параметрах метода (параметр `test_size`) мы указываем, какую часть исходного датафрейма нужно оставить для тестирования модели. В нашем коде эта часть составляет 25 %, или 0.25.
        > Не существует идеального соотношения обучающей и тестовой выборки, однако принято выделять на часть обучения больше данных, около ⅔, а оставшуюся часть используют для проверки — ⅓ выборки. Таким образом, самые популярные значения параметра test_size составляют 0.3, 0.25, 0.2.

   - **Создание и обучение модели**\
Сам процесс создания и тестирования модели занимает всего четыре строчки кода. В качестве алгоритма мы будем использовать популярный и довольно мощный алгоритм [RandomForestRegressor](https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestRegressor.html). Он реализован в библиотеке sklearn.
    - **Оценка качества модели**\
Для оценки качества модели — точности прогнозов, сделанных моделью, — мы будем использовать метрику (некий числовой показатель), которая называется **MAPE (mean absolute percentage error)**, средняя абсолютная процентная ошибка. Эту метрику очень легко интерпретировать. Если у вас MAPE = 11.4 %, то это говорит о том, что ошибка составила 11.4 % от фактических значений.\
$MAPE = 100\% * 1/n \sum\limits_{i=1}^n \frac{|ytrue_i - ypred_i|}{|ytrue_i|}$,
где $ytrue_i$ — фактические значения прогноза, a $ypred_i$ — предсказанные.


[к оглавлению](#оглавление)

## Результаты

В результате проведенной работы создал модель предсказания рейтинга отелей.\
Ноутбук с результатами представлен по [ссылке](01_Kaggle_compet.ipynb)

[к оглавлению](#оглавление)

## Выводы

Файл для публикации данных на Kaggle сохранен в data.

[к оглавлению](#оглавление)